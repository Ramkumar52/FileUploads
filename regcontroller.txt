package com.raistudies.controllers;
2
 
3
import javax.validation.Valid;
4
 
5
import org.springframework.beans.factory.annotation.Autowired;
6
import org.springframework.stereotype.Controller;
7
import org.springframework.ui.ModelMap;
8
import org.springframework.validation.BindingResult;
9
import org.springframework.web.bind.annotation.ModelAttribute;
10
import org.springframework.web.bind.annotation.RequestMapping;
11
import org.springframework.web.bind.annotation.RequestMethod;
12
 
13
import com.raistudies.domain.RegistrationBean;
14
import com.raistudies.validator.RegistrationValidator;
15
 
16
@Controller
17
@RequestMapping(value="/registration.htm")
18
public class RegistrationController {
19
    RegistrationValidator validator = null;
20
 
21
    public RegistrationValidator getValidator() {
22
        return validator;
23
    }
24
 
25
    @Autowired
26
    public void setValidator(RegistrationValidator validator) {
27
        this.validator = validator;
28
    }
29
 
30
    @RequestMapping(method=RequestMethod.GET)
31
    public String showForm(ModelMap model){
32
        RegistrationBean userRegis = new RegistrationBean();
33
        model.addAttribute("Registration", userRegis);
34
        return "registration";
35
    }
36
 
37
    @RequestMapping(method=RequestMethod.POST)
38
    public String processForm(@ModelAttribute(value="Registration") @Valid RegistrationBean userRegis,BindingResult result){
39
        validator.validate(userRegis, result);
40
        if(result.hasErrors()){
41
            return "registration";
42
        }else{
43
            return "success";
44
        }
45
    }
46
}
